<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Index</title>
    <link rel="icon" href="/img/Egg.ico" type="image/x-icon" />
    <link rel="stylesheet" href="/css/formulariodos.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <nav th:replace="/fragments/navbar :: nav"></nav>


    <h2 class="titulo">Verificacion de DNI</h2>

    <div class="contenedorInput">
      <form
        onsubmit="return validarBusqueda()"
        action="/propietario/buscarPropietario"
        method="POST"
      >
        <input
          type="text"
          id="dniInput"
          name="dni"
          required
          pattern="\d*"
          class="coolinput"
          placeholder="Ingrese DNI"
          style="text-align: center"
        />
        <div class="divBoton">
          <button
            type="submit"
            id="buscar"
            class="botonSearch"
            style="
              width: 100px;
              height: 40px;
              background-color: black;
              color: white;
              border-radius: 10px;
            "
          >
            <b>Buscar</b>
          </button>
        </div>
      </form>
    </div>
    <span
      id="error"
      style="display: none; color: red; margin-left: 630px; font-size: 20px"
      >Debe ingresar entre 7 y 8 números</span
    >

    <footer class="text-muted py-5">
      <div class="containerFooter">
        <p class="mb-1">
          Album example is &copy; Bootstrap,<br />but please download and
          customize it for yourself!
        </p>
        <p class="mb-0">
          New to Bootstrap? <a href="/"><br />Visit the homepage</a> or read our
          <a href="../getting-started/introduction/">getting started guide</a>.
        </p>
        <p class="float-end mb-1">
          <a href="#" style="text-decoration: none"
            ><span>â¬ï¸</span> Back to top</a
          >
        </p>
      </div>
    </footer>

    <script>
      function validarBusqueda() {
        var busqueda = document.getElementById("dniInput");
        var inputValue = busqueda.value;
        if (
          inputValue.length < 7 ||
          inputValue.length > 8 ||
          !/^\d*$/.test(inputValue)
        ) {
          document.getElementById("error").style.display = "inline";
          localStorage.removeItem("valor"); // Eliminar el valor almacenado si no es válido
          return false;
        } else {
          document.getElementById("error").style.display = "none"; // Ocultar el mensaje de error si el valor es válido
          // Almacenar el valor de entrada válido en localStorage
          localStorage.setItem("valor", inputValue);
          return true;
        }
      }
    </script>
    <script>
      document.getElementById("buscar").addEventListener("click", function () {
        var inputValue = document.getElementById("dniInput").value;
        if (
          inputValue.length >= 7 &&
          inputValue.length <= 8 &&
          /^\d*$/.test(inputValue)
        ) {
          // Redirigir a la página "tutor_form.html" solo si el valor es válido
          window.location.href = "tutor_form.html";
        } else {
          // Si el valor no es válido, eliminar cualquier valor almacenado en localStorage
          localStorage.removeItem("valor");
        }
      });
    </script>
  </body>
</html>
